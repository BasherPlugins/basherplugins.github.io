<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BasherClans</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .description {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        .file-item {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        .file-header {
            background: #f0f0f0;
            padding: 10px 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .file-header:hover {
            background: #e0e0e0;
        }
        .file-content {
            padding: 15px;
            background: white;
            display: none;
        }
        .file-content pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .folder {
            margin-left: 20px;
        }
        .folder-name {
            font-weight: bold;
            margin: 20px 0 10px 0;
            color: #333;
        }
        .loading {
            text-align: center;
            padding: 20px;
        }
        .error {
            color: red;
            padding: 10px;
            background: #ffe6e6;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="description">
        <h1>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞</h1>
        <p>–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞. –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞, –Ω–∞–∂–∞–≤ –Ω–∞ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ.</p>
        <p>–§–∞–π–ª—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –ø–æ –ø–∞–ø–∫–∞–º –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.</p>
    </div>

    <div id="files-container">
        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤...</div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const REPO_OWNER = 'BasherPlugins'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à username
        const REPO_NAME = 'basherplugins.giithub.io'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        const BRANCH = 'main'; // –ò–ª–∏ 'master', –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–π –≤–µ—Ç–∫–∏

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
        async function loadConfigFiles() {
            const container = document.getElementById('files-container');
            
            try {
                // –ü–æ–ª—É—á–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ configs
                const files = await getRepoContents('configs');
                displayFiles(files, container);
            } catch (error) {
                container.innerHTML = `<div class="error">–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤: ${error.message}</div>`;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø–∞–ø–∫–∏ —á–µ—Ä–µ–∑ GitHub API
        async function getRepoContents(path = '') {
            const url = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/${path}?ref=${BRANCH}`;
            
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            return await response.json();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞
        async function getFileContent(file) {
            if (file.type === 'file') {
                const response = await fetch(file.download_url);
                if (!response.ok) {
                    throw new Error(`Failed to fetch file: ${response.status}`);
                }
                return await response.text();
            }
            return null;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫
        async function displayFiles(files, container, level = 0) {
            container.innerHTML = '';
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º: —Å–Ω–∞—á–∞–ª–∞ –ø–∞–ø–∫–∏, –ø–æ—Ç–æ–º —Ñ–∞–π–ª—ã
            const sortedFiles = files.sort((a, b) => {
                if (a.type === b.type) {
                    return a.name.localeCompare(b.name);
                }
                return a.type === 'dir' ? -1 : 1;
            });

            for (const item of sortedFiles) {
                if (item.type === 'dir') {
                    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–∞–ø–∫—É
                    const folderDiv = document.createElement('div');
                    folderDiv.className = 'folder';
                    
                    const folderHeader = document.createElement('div');
                    folderHeader.className = 'folder-name';
                    folderHeader.textContent = `üìÅ ${item.name}/`;
                    folderDiv.appendChild(folderHeader);
                    
                    const folderContent = document.createElement('div');
                    folderContent.className = 'folder-content';
                    
                    try {
                        const subFiles = await getRepoContents(item.path);
                        await displayFiles(subFiles, folderContent, level + 1);
                    } catch (error) {
                        folderContent.innerHTML = `<div class="error">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞–ø–∫–∏: ${error.message}</div>`;
                    }
                    
                    folderDiv.appendChild(folderContent);
                    container.appendChild(folderDiv);
                    
                } else if (item.type === 'file' && item.name.endsWith('.yml')) {
                    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º YAML —Ñ–∞–π–ª
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    
                    const fileHeader = document.createElement('div');
                    fileHeader.className = 'file-header';
                    fileHeader.innerHTML = `
                        <span>üìÑ ${item.name}</span>
                        <span>‚ñ∂</span>
                    `;
                    
                    const fileContent = document.createElement('div');
                    fileContent.className = 'file-content';
                    fileContent.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ...</div>';
                    
                    fileHeader.addEventListener('click', async () => {
                        const isOpen = fileContent.style.display === 'block';
                        fileContent.style.display = isOpen ? 'none' : 'block';
                        fileHeader.querySelector('span:last-child').textContent = isOpen ? '‚ñ∂' : '‚ñº';
                        
                        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
                        if (!isOpen && fileContent.querySelector('pre') === null) {
                            try {
                                const content = await getFileContent(item);
                                fileContent.innerHTML = `<pre>${escapeHtml(content)}</pre>`;
                            } catch (error) {
                                fileContent.innerHTML = `<div class="error">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞: ${error.message}</div>`;
                            }
                        }
                    });
                    
                    fileItem.appendChild(fileHeader);
                    fileItem.appendChild(fileContent);
                    container.appendChild(fileItem);
                }
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è HTML
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', loadConfigFiles);
    </script>
</body>
</html>
